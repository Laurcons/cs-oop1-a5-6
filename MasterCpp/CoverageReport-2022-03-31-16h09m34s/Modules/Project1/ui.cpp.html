<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>ui.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "base.h"
#include "ui.h"
#include "openlink.h"
#include &lt;iostream&gt;
#include &lt;sstream&gt;

namespace bub {

	ui::ui(const tutorial_controller&amp; c) :
<span style = "background-color:#fdd">		controller(c) {}</span>

<span style = "background-color:#fdd">	void ui::start() {
		this-&gt;controller.add_tutorial("Learn Python - Full Course for Beginners", "freeCodeCamp.org", 4 * 60 + 26, 51, 795000, "https://www.youtube.com/watch?v=rfscVS0vtbw");
		this-&gt;controller.add_tutorial("C Programming Tutorial for Beginners", "freeCodeCamp.org", 3 * 60 + 46, 13, 127000, "https://www.youtube.com/watch?v=KJgsSFOSQv0");
		this-&gt;controller.add_tutorial("BrainF*uck Tutorial", "Tech With Tim", 27, 33, 134000, "https://www.youtube.com/watch?v=G-tuXeMyb58");
		this-&gt;controller.add_tutorial("Rust Crash Course | Rustlang", "Traversy Media", 1 * 60 + 50, 43, 453536, "https://www.youtube.com/watch?v=zF34dRivLOw");
		this-&gt;controller.add_tutorial("C# - Full Tutorial for Beginners", "freeCodeCamp.org", 4 * 60 + 31, 29, 2342000, "https://www.youtube.com/watch?v=GhQdlIFylQ8");
		this-&gt;controller.add_tutorial("Learn Go Programming | Golang Tutorial for Beginners", "freeCodeCamp.org", 6 * 60 + 39, 58, 2352000, "https://www.youtube.com/watch?v=YS4e4q9oBaU");
		this-&gt;controller.add_tutorial("Perl Tutorial", "Derek Banas", 67, 24, 245000, "https://www.youtube.com/watch?v=WEghIXs8F6c");
		this-&gt;controller.add_tutorial("Ruby Programming Language Full Course", "freeCodeCamp.org", 242, 23, 356000, "https://www.youtube.com/watch?v=t_ispmWmdjY");
		this-&gt;controller.add_tutorial("Bash Programming Course", "linuxhint", 183, 23, 35000, "https://www.youtube.com/watch?v=e7BufAVwDiM");
		this-&gt;controller.add_tutorial("Learning Awk is Essential for Linux Users", "DistroTube", 20, 2, 240000, "https://www.youtube.com/watch?v=9YOZmI-zWok");
		while (1) {
			this-&gt;print_menu();
			auto option = this-&gt;input("option&gt; ");
			if (option == "x")
				break;
			int opt = this-&gt;to_int(option);
			switch (opt) {
			case 1: this-&gt;do_option_1(); break;
			case 2: this-&gt;do_option_2(); break;</span>
			}
<span style = "background-color:#fdd">		}
		std::cout &lt;&lt; "Exiting" &lt;&lt; std::endl;
	}</span>

<span style = "background-color:#fdd">	void ui::print_menu() {
		std::cout</span>
			&lt;&lt; std::endl &lt;&lt; std::endl
			&lt;&lt; "Select mode:" &lt;&lt; std::endl
			&lt;&lt; "1. Administrator Mode" &lt;&lt; std::endl
			&lt;&lt; "2. User mode" &lt;&lt; std::endl
			&lt;&lt; "x. Exit" &lt;&lt; std::endl;
<span style = "background-color:#fdd">	}</span>

<span style = "background-color:#fdd">	void ui::print_admin_menu() {
		std::cout</span>
			&lt;&lt; std::endl &lt;&lt; std::endl
			&lt;&lt; "What do you want to do?" &lt;&lt; std::endl
			&lt;&lt; "1. Add tutorial" &lt;&lt; std::endl
			&lt;&lt; "2. Edit tutorial" &lt;&lt; std::endl
			&lt;&lt; "3. Remove tutorial" &lt;&lt; std::endl
			&lt;&lt; "4. View all tutorials" &lt;&lt; std::endl
			&lt;&lt; "b. Go back" &lt;&lt; std::endl;
<span style = "background-color:#fdd">	}</span>

<span style = "background-color:#fdd">	void ui::print_user_menu() {
		std::cout</span>
			&lt;&lt; std::endl &lt;&lt; std::endl
			&lt;&lt; "What do you want to do?" &lt;&lt; std::endl
			&lt;&lt; "1. Explore" &lt;&lt; std::endl
			&lt;&lt; "2. Remove from watchlist" &lt;&lt; std::endl
			&lt;&lt; "3. See the entire watchlist" &lt;&lt; std::endl
			&lt;&lt; "b. Go back" &lt;&lt; std::endl;
<span style = "background-color:#fdd">	}</span>

<span style = "background-color:#fdd">	std::string ui::input(std::string prompt) {
		std::string inp;
		std::cout &lt;&lt; prompt;
		std::getline(std::cin, inp);
		return inp;
	}</span>

<span style = "background-color:#fdd">	int ui::to_int(std::string str) {
		std::stringstream ss;</span>
		int out;
<span style = "background-color:#fdd">		ss &lt;&lt; str;
		ss &gt;&gt; out;
		return out;
	}</span>

	// admin mode
<span style = "background-color:#fdd">	void ui::do_option_1() {
		while (1) {
			try {
				this-&gt;print_admin_menu();
				auto option = this-&gt;input("option&gt; ");
				if (option == "b")
					break;
				int opt = this-&gt;to_int(option);
				switch (opt) {
				case 1: this-&gt;do_option_1_1(); break;
				case 2: this-&gt;do_option_1_2(); break;
				case 3: this-&gt;do_option_1_3(); break;
				case 4: this-&gt;do_option_1_4(); break;</span>
				}
<span style = "background-color:#fdd">			}</span>
			catch (const std::exception&amp; ex) {
<span style = "background-color:#fdd">				std::cout &lt;&lt; ex.what() &lt;&lt; std::endl;
			}
		}
	}</span>

<span style = "background-color:#fdd">	void ui::do_option_1_1() {
		std::cout &lt;&lt; "Adding new Tutorial" &lt;&lt; std::endl;
		std::string title = this-&gt;input("Title: ");
		std::string presenter = this-&gt;input("Presenter: ");
		int min = this-&gt;to_int(this-&gt;input("Duration&gt;Minutes: "));
		int sec = this-&gt;to_int(this-&gt;input("Duration&gt;Seconds: "));
		int likes = this-&gt;to_int(this-&gt;input("Likes: "));
		std::string link = this-&gt;input("Link: ");
		this-&gt;controller.add_tutorial(</span>
			title,
			presenter,
			min, sec,
			likes,
			link
		);
<span style = "background-color:#fdd">		std::cout &lt;&lt; "Tutorial successfully added.";
	}</span>

<span style = "background-color:#fdd">	void ui::do_option_1_2() {
		std::cout &lt;&lt; "Editing Tutorial" &lt;&lt; std::endl;
		std::string title = this-&gt;input("Title to edit: ");
		tutorial&amp; tut = this-&gt;controller.edit_start(title);</span>

<span style = "background-color:#fdd">		std::cout &lt;&lt; "Now editing" &lt;&lt; std::endl &lt;&lt; tut &lt;&lt; std::endl;
		std::string newTitle = this-&gt;input("New title: ");
		std::string newPresenter = this-&gt;input("New presenter: ");
		int newMin = this-&gt;to_int(this-&gt;input("New Duration&gt;Minutes: "));
		int newSec = this-&gt;to_int(this-&gt;input("New Duration&gt;Seconds: "));
		int newLikes = this-&gt;to_int(this-&gt;input("New likes: "));
		std::string newLink = this-&gt;input("New link: ");
		this-&gt;controller.edit_end(</span>
			tut,
			newTitle,
			newPresenter,
			newMin, newSec,
			newLikes,
			newLink
		);
<span style = "background-color:#fdd">		std::cout &lt;&lt; "Successfully updated." &lt;&lt; std::endl;
	}</span>

<span style = "background-color:#fdd">	void ui::do_option_1_3() {
		std::cout &lt;&lt; "Removing a Tutorial" &lt;&lt; std::endl;
		std::string title = this-&gt;input("Title to remove: ");
		this-&gt;controller.remove(title);
		std::cout &lt;&lt; "Successfully removed." &lt;&lt; std::endl;
	}</span>

<span style = "background-color:#fdd">	void ui::do_option_1_4() {
		std::cout &lt;&lt; "Viewing all Tutorials" &lt;&lt; std::endl;
		for (auto tut : this-&gt;controller.get_all()) {
			std::cout &lt;&lt; tut &lt;&lt; std::endl;
		}
	}</span>

<span style = "background-color:#fdd">	void ui::do_option_2() {
		while (1) {
			try {
				this-&gt;print_user_menu();
				auto option = this-&gt;input("option&gt; ");
				if (option == "b")
					break;
				int opt = this-&gt;to_int(option);
				switch (opt) {
				case 1: this-&gt;do_option_2_1(); break;
				case 2: this-&gt;do_option_2_2(); break;
				case 3: this-&gt;do_option_2_3(); break;</span>
				}
<span style = "background-color:#fdd">			}</span>
			catch (const std::exception&amp; ex) {
<span style = "background-color:#fdd">				std::cout &lt;&lt; ex.what() &lt;&lt; std::endl;
			}
		}
	}</span>

<span style = "background-color:#fdd">	void ui::do_option_2_1() {
		auto presenterFilter = this-&gt;input("Enter presenter filter (or x): ");
		auto filtered = this-&gt;controller.get_all();
		if (presenterFilter != "x") {
			for (int i = filtered.size() - 1; i &gt;= 0; i--) {
				if (filtered[i].get_presenter() != presenterFilter)
					filtered.remove(i);
			}</span>
		}
<span style = "background-color:#fdd">		bool exit = false;
		while (1) {
			for (tutorial&amp; tut : filtered) {
				std::cout &lt;&lt; "Currently at tutorial" &lt;&lt; std::endl</span>
					&lt;&lt; tut.get_title() &lt;&lt; " by " &lt;&lt; tut.get_presenter() &lt;&lt; std::endl
					&lt;&lt; tut.get_duration().m &lt;&lt; ":" &lt;&lt; tut.get_duration().s &lt;&lt; std::endl
					&lt;&lt; tut.get_likes() &lt;&lt; " likes" &lt;&lt; std::endl
					&lt;&lt; tut.get_link() &lt;&lt; std::endl;
<span style = "background-color:#fdd">				std::cout &lt;&lt; "What do you want to do?" &lt;&lt; std::endl</span>
					&lt;&lt; "1. Open link" &lt;&lt; std::endl
					&lt;&lt; "2. Add to watchlist" &lt;&lt; std::endl
					&lt;&lt; "3. Skip" &lt;&lt; std::endl
					&lt;&lt; "b. Exit Explore" &lt;&lt; std::endl;
<span style = "background-color:#fdd">				auto option = this-&gt;input("option&gt; ");
				if (option == "1")
					open_link(tut.get_link());
				else if (option == "2")
					this-&gt;watchlist.add(tut);
				else if (option == "3")
					; // do nothing
				else if (option == "b")
					exit = true;
				if (exit) break;</span>

<span style = "background-color:#fdd">				std::cout &lt;&lt; std::endl &lt;&lt; std::endl;
			}
			if (exit) break;
			std::cout &lt;&lt; "Reached end of tutorials, restarting" &lt;&lt; std::endl;
		}
	}</span>

<span style = "background-color:#fdd">	void ui::do_option_2_2() {
		auto title = this-&gt;input("Title of tutorial: ");
		auto liked = this-&gt;input("Like? y/n: ");</span>
		// find tut
<span style = "background-color:#fdd">		for (int i = 0; i &lt; this-&gt;watchlist.size(); i++) {
			if (this-&gt;watchlist[i].get_title() == title) {
				if (liked == "y") {</span>
					// do edit
<span style = "background-color:#fdd">					tutorial&amp; tut = this-&gt;controller.edit_start(title);
					tut.inc_likes();</span>
				}
<span style = "background-color:#fdd">				this-&gt;watchlist.remove(i);
				break;</span>
			}
<span style = "background-color:#fdd">		}
	}</span>

<span style = "background-color:#fdd">	void ui::do_option_2_3() {
		std::cout &lt;&lt; "Watchlist" &lt;&lt; std::endl;
		for (auto tut : this-&gt;watchlist) {
			std::cout &lt;&lt; tut &lt;&lt; std::endl;
		}
	}</span>

}</pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>